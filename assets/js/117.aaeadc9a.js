(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{582:function(s,a,e){"use strict";e.r(a);var t=e(27),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"npm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[s._v("#")]),s._v(" NPM")]),s._v(" "),e("h2",{attrs:{id:"介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),e("p",[s._v("NPM是随同NodeJS一起安装的包管理工具，能解决NodeJS代码部署上的很多问题，常见的使用场景有以下几种：")]),s._v(" "),e("ul",[e("li",[s._v("允许用户从NPM服务器下载别人编写的第三方包到本地使用。")]),s._v(" "),e("li",[s._v("允许用户从NPM服务器下载并安装别人编写的命令行程序到本地使用。")]),s._v(" "),e("li",[s._v("允许用户将自己编写的包或命令行程序上传到NPM服务器供别人使用。")])]),s._v(" "),e("p",[s._v('由于新版的nodejs已经集成了npm，所以之前npm也一并安装好了。同样可以通过输入 "npm -v" 来测试是否成功安装。命令如下，出现版本提示表示安装成功:')]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -v\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),s._v(".0\n")])])]),e("p",[s._v("如果你安装的是旧版本的 npm，可以很容易得通过 npm 命令来升级，命令如下：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -g\n")])])]),e("h2",{attrs:{id:"使用-npm-命令安装模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-npm-命令安装模块"}},[s._v("#")]),s._v(" 使用 npm 命令安装模块")]),s._v(" "),e("p",[s._v("npm 安装 Node.js 模块语法格式如下：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Module Name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),e("p",[s._v("例如，使用 npm 命令安装常用的 Node.js web框架模块 express:")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" express\n")])])]),e("p",[s._v("安装好之后，express 包就放在了工程目录下的 node_modules 目录中，因此在代码中只需要通过 require('express') 的方式就好，无需指定第三方包路径。")]),s._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" express "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'express'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("h2",{attrs:{id:"全局安装与本地安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#全局安装与本地安装"}},[s._v("#")]),s._v(" 全局安装与本地安装")]),s._v(" "),e("p",[s._v("npm 的包安装分为本地安装（local）、全局安装（global）两种，从敲的命令行来看，差别只是有没有-g而已，比如")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" express          "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地安装")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" express -g       "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局安装")]),s._v("\n")])])]),e("p",[s._v("如果出现以下错误：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" err"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Error: connect ECONNREFUSED "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8087 \n")])])]),e("p",[s._v("解决办法为：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" proxy null\n")])])]),e("p",[e("strong",[s._v("本地安装")])]),s._v(" "),e("ol",[e("li",[e("p",[s._v("将安装包放在 ./node_modules 下（运行 npm 命令时所在的目录），如果没有 node_modules 目录，会在当前执行 npm 命令的目录下生成 node_modules 目录。")])]),s._v(" "),e("li",[e("p",[s._v("可以通过 require() 来引入本地安装的包。")])])]),s._v(" "),e("p",[e("strong",[s._v("全局安装")])]),s._v(" "),e("ol",[e("li",[e("p",[s._v("将安装包放在 /usr/local 下或者你 node 的安装目录。")])]),s._v(" "),e("li",[e("p",[s._v("可以直接在命令行里使用。")])])]),s._v(" "),e("p",[s._v("如果你希望具备两者功能，则需要在两个地方安装它或使用 "),e("code",[s._v("npm link")]),s._v("。")]),s._v(" "),e("p",[s._v("接下来我们使用全局方式安装 express")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" express -g\n")])])]),e("p",[s._v("安装过程输出如下内容，第一行输出了模块的版本号及安装位置。")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("express@4.13.3 node_modules/express\n├── escape-html@1.0.2\n├── range-parser@1.0.2\n├── merge-descriptors@1.0.0\n├── array-flatten@1.1.1\n├── cookie@0.1.3\n├── utils-merge@1.0.0\n...\n")])])]),e("p",[e("strong",[s._v("查看安装信息")])]),s._v(" "),e("p",[s._v("你可以使用以下命令来查看所有全局安装的模块：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list -g\n\n├─┬ cnpm@4.3.2\n│ ├── auto-correct@1.0.0\n│ ├── bagpipe@0.3.5\n│ ├── colors@1.1.2\n│ ├─┬ commander@2.9.0\n│ │ └── graceful-readlink@1.0.1\n……\n")])])]),e("p",[s._v("如果要查看某个模块的版本号，可以使用命令如下：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list grunt\n\nprojectName@projectVersion /path/to/project/folder\n└── grunt@0.4.1\n")])])]),e("h2",{attrs:{id:"卸载模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#卸载模块"}},[s._v("#")]),s._v(" 卸载模块")]),s._v(" "),e("p",[s._v("我们可以使用以下命令来卸载 Node.js 模块。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" uninstall express\n")])])]),e("p",[s._v("卸载后，你可以到 /node_modules/ 目录下查看包是否还存在，或者使用以下命令查看：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])])]),e("h2",{attrs:{id:"更新模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新模块"}},[s._v("#")]),s._v(" 更新模块")]),s._v(" "),e("p",[s._v("我们可以使用以下命令更新模块：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update express\n")])])]),e("h2",{attrs:{id:"搜索模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搜索模块"}},[s._v("#")]),s._v(" 搜索模块")]),s._v(" "),e("p",[s._v("使用以下来搜索模块：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" search express\n")])])]),e("h2",{attrs:{id:"创建模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建模块"}},[s._v("#")]),s._v(" 创建模块")]),s._v(" "),e("p",[s._v("创建模块，package.json 文件是必不可少的。我们可以使用 NPM 生成 package.json 文件，生成的文件包含了基本的结果。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init\n")])])]),e("p",[s._v("使用以下命令在 npm 资源库中注册用户（使用邮箱注册）")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser\nUsername: xxx\nPassword:\nEmail: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("this IS public"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" me@xxx.com\n")])])]),e("p",[s._v("接下来我们就用以下命令来发布模块：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish\n")])])]),e("h2",{attrs:{id:"版本号"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#版本号"}},[s._v("#")]),s._v(" 版本号")]),s._v(" "),e("p",[s._v("使用NPM下载和发布代码时都会接触到版本号。NPM使用语义版本号来管理代码，这里简单介绍一下。")]),s._v(" "),e("p",[s._v("语义版本号分为X.Y.Z三位，分别代表主版本号、次版本号和补丁版本号。当代码变更时，版本号按以下原则更新。")]),s._v(" "),e("ul",[e("li",[s._v("如果只是修复bug，需要更新Z位。")]),s._v(" "),e("li",[s._v("如果是新增了功能，但是向下兼容，需要更新Y位。")]),s._v(" "),e("li",[s._v("如果有大变动，向下不兼容，需要更新X位。")])]),s._v(" "),e("p",[s._v('版本号有了这个保证后，在申明第三方包依赖时，除了可依赖于一个固定版本号外，还可依赖于某个范围的版本号。例如"argv": "0.0.x"表示依赖于0.0.x系列的最新版argv。')]),s._v(" "),e("p",[s._v("NPM支持的所有版本号范围指定方式可以查看"),e("a",{attrs:{href:"https://www.npmjs.com/doc/files/package.json.html#dependencies",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),e("OutboundLink")],1),s._v("。")]),s._v(" "),e("h2",{attrs:{id:"npm-常用命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-常用命令"}},[s._v("#")]),s._v(" NPM 常用命令")]),s._v(" "),e("p",[s._v("除了本章介绍的部分外，NPM还提供了很多功能，package.json里也有很多其它有用的字段。")]),s._v(" "),e("p",[s._v("除了可以在"),e("a",{attrs:{href:"https://www.npmjs.com/package/doc",target:"_blank",rel:"noopener noreferrer"}},[s._v("npmjs.org/doc/"),e("OutboundLink")],1),s._v("查看官方文档外，这里再介绍一些NPM常用命令。")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("NPM提供了很多命令，例如install和publish，使用npm help可查看所有命令。")])]),s._v(" "),e("li",[e("p",[s._v("使用npm help "),e("command",[s._v("可查看某条命令的详细帮助，例如npm help install。")])],1)]),s._v(" "),e("li",[e("p",[s._v("在package.json所在目录下使用npm install . -g可先在本地安装当前命令行程序，可用于发布前的本地测* 试。")])]),s._v(" "),e("li",[e("p",[s._v("使用npm update "),e("package",[s._v("可以把当前目录下node_modules子目录里边的对应模块更新至最新版本。")])],1)]),s._v(" "),e("li",[e("p",[s._v("使用npm update "),e("package",[s._v(" -g可以把全局安装的对应命令行程序更新至最新版。")])],1)]),s._v(" "),e("li",[e("p",[s._v("使用npm cache clear可以清空NPM本地缓存，用于对付使用相同版本号发布新版本代码的人。")])]),s._v(" "),e("li",[e("p",[s._v("使用npm unpublish "),e("package",[s._v("@"),e("version",[s._v("可以撤销发布自己发布过的某个版本代码。")])],1)],1)])]),s._v(" "),e("h2",{attrs:{id:"使用淘宝-npm-镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用淘宝-npm-镜像"}},[s._v("#")]),s._v(" 使用淘宝 NPM 镜像")]),s._v(" "),e("p",[s._v("大家都知道国内直接使用 npm 的官方镜像是非常慢的，这里推荐使用淘宝 NPM 镜像。")]),s._v(" "),e("p",[s._v("淘宝 NPM 镜像是一个完整 npmjs.org 镜像，你可以用此代替官方版本(只读)，同步频率目前为 10分钟 一次以保证尽量与官方服务同步。")]),s._v(" "),e("p",[s._v("你可以使用淘宝定制的 cnpm (gzip 压缩支持) 命令行工具代替默认的 npm:")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g cnpm --registry"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://registry.npm.taobao.org\n")])])]),e("p",[s._v("这样就可以使用 cnpm 命令来安装模块了：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ cnpm "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);